<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Professional Color Scheme */
            --chrome-bg: #0f0f0f;
            --chrome-card-bg: #1e1e1e;
            --chrome-card-hover: #2a2a2a;
            --chrome-text: #ffffff;
            --chrome-text-secondary: #aaaaaa;
            --chrome-border: #333333;
            --chrome-blue: #1a73e8;
            --chrome-blue-hover: #2b7de9;
            --chrome-red: #ea4335;
            --chrome-green: #34a853;
            --chrome-yellow: #f9ab00;
            --chrome-purple: #8e44ad;
            --chrome-cyan: #00bcd4;
            --chrome-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            --chrome-search-bg: #2a2a2a;
            --chrome-search-hover: #333333;
            --chrome-bookmarkbar-bg: #151515;
            --chrome-bookmarkbar-border: #2a2a2a;
        }

        body {
            font-family: 'Google Sans', 'Roboto', sans-serif;
            background: var(--chrome-bg);
            color: var(--chrome-text);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Chrome Bookmark Bar - At the very top */
        .chrome-bookmark-bar {
            width: 100%;
            background: var(--chrome-bookmarkbar-bg);
            border-bottom: 1px solid var(--chrome-bookmarkbar-border);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            z-index: 999;
            height: 48px;
            overflow: hidden;
        }

        .bookmark-bar-container {
            display: flex;
            align-items: center;
            gap: 4px;
            width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 2px 0;
        }

        .bookmark-bar-container::-webkit-scrollbar {
            height: 3px;
        }

        .bookmark-bar-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .bookmark-bar-container::-webkit-scrollbar-thumb {
            background: var(--chrome-blue);
            border-radius: 2px;
        }

        .bookmark-bar-item {
            background: transparent;
            border: 1px solid transparent;
            color: var(--chrome-text-secondary);
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 13px;
            font-family: 'Google Sans', sans-serif;
            white-space: nowrap;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
            position: relative;
            max-width: 180px;
            height: 32px;
        }

        .bookmark-bar-item:hover {
            background: var(--chrome-card-hover);
            color: var(--chrome-text);
            border-color: var(--chrome-border);
        }

        .bookmark-bar-item.folder {
            padding-right: 28px;
            position: relative;
        }

        .bookmark-bar-item.folder::after {
            content: 'â–¾';
            position: absolute;
            right: 10px;
            font-size: 12px;
            color: var(--chrome-text-secondary);
            transition: transform 0.2s;
        }

        .bookmark-bar-item.folder:hover::after {
            transform: rotate(180deg);
        }

        .bookmark-bar-favicon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .bookmark-bar-name {
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }

        .bookmark-bar-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
            padding-left: 10px;
            border-left: 1px solid var(--chrome-border);
        }

        .bookmark-bar-add-btn {
            background: var(--chrome-card-bg);
            border: 1px solid var(--chrome-border);
            color: var(--chrome-text-secondary);
            width: 30px;
            height: 30px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .bookmark-bar-add-btn:hover {
            background: var(--chrome-blue);
            color: white;
            border-color: var(--chrome-blue);
            transform: scale(1.05);
        }

        /* Main Container */
        .chrome-container {
            width: 100%;
            max-width: 1400px;
            margin: 48px auto 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            padding: 50px 30px;
            overflow-y: auto;
        }

        /* Google Logo */
        .google-logo {
            margin-bottom: 40px;
            transition: transform 0.3s;
        }

        .google-logo:hover {
            transform: scale(1.02);
        }

        .google-logo svg {
            width: 160px;
            height: 60px;
        }

        /* Chrome Search Box */
        .chrome-search {
            width: 90%;
            max-width: 700px;
            margin-bottom: 50px;
        }

        .search-container {
            background: var(--chrome-search-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 24px;
            padding: 14px 24px;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
        }

        .search-container:hover {
            background: var(--chrome-search-hover);
            box-shadow: var(--chrome-shadow);
            border-color: var(--chrome-border);
        }

        .search-container.focused {
            background: var(--chrome-search-hover);
            box-shadow: var(--chrome-shadow);
            border-color: var(--chrome-blue);
        }

        .search-icon {
            color: var(--chrome-text-secondary);
            margin-right: 16px;
            font-size: 18px;
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--chrome-text);
            font-size: 16px;
            font-family: 'Google Sans', sans-serif;
        }

        .search-input::placeholder {
            color: var(--chrome-text-secondary);
        }

        .search-actions {
            display: flex;
            gap: 8px;
        }

        .search-action-btn {
            background: transparent;
            border: none;
            color: var(--chrome-text-secondary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-action-btn:hover {
            background: var(--chrome-card-hover);
            color: var(--chrome-text);
        }

        /* Speed Dial Section */
        .speed-dial-section {
            width: 100%;
            margin-bottom: 60px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 25px;
            text-align: center;
            color: var(--chrome-text);
        }

        .speed-dial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 20px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .speed-dial-item {
            background: var(--chrome-card-bg);
            border-radius: 12px;
            height: 130px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid var(--chrome-border);
            overflow: hidden;
        }

        .speed-dial-item:hover {
            background: var(--chrome-card-hover);
            transform: translateY(-3px);
            box-shadow: var(--chrome-shadow);
            border-color: var(--chrome-blue);
        }

        .speed-dial-favicon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--chrome-blue), var(--chrome-cyan));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 22px;
            color: white;
            transition: all 0.2s ease;
        }

        .speed-dial-item:hover .speed-dial-favicon {
            transform: scale(1.05);
        }

        .speed-dial-name {
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            max-width: 90%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding: 0 8px;
        }

        .add-speed-dial {
            background: transparent;
            border: 2px dashed var(--chrome-border);
            color: var(--chrome-text-secondary);
        }

        .add-speed-dial:hover {
            background: var(--chrome-card-hover);
            color: var(--chrome-text);
            border-color: var(--chrome-blue);
        }

        /* Context Menu - For speed dial and bookmarks */
        .context-menu {
            position: fixed;
            background: var(--chrome-card-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            min-width: 180px;
            z-index: 2000;
            display: none;
            overflow: hidden;
        }

        .context-menu.active {
            display: block;
            animation: fadeIn 0.15s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .context-menu-item {
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--chrome-text);
            font-size: 13px;
            font-family: 'Google Sans', sans-serif;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
        }

        .context-menu-item:hover {
            background: var(--chrome-card-hover);
        }

        .context-menu-item i {
            width: 16px;
            text-align: center;
            color: var(--chrome-text-secondary);
        }

        /* Folder Dropdown */
        .folder-dropdown {
            position: absolute;
            top: calc(100% + 4px);
            left: 0;
            background: var(--chrome-card-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            min-width: 200px;
            z-index: 1001;
            display: none;
            overflow: hidden;
        }

        .folder-dropdown.active {
            display: block;
            animation: fadeIn 0.15s ease;
        }

        .folder-dropdown-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--chrome-border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .folder-dropdown-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            background: var(--chrome-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .folder-dropdown-title {
            font-size: 13px;
            font-weight: 500;
            flex: 1;
        }

        .folder-dropdown-count {
            font-size: 11px;
            color: var(--chrome-text-secondary);
            background: var(--chrome-bookmarkbar-bg);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .folder-dropdown-items {
            max-height: 300px;
            overflow-y: auto;
            padding: 4px 0;
        }

        .folder-dropdown-item {
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-radius: 4px;
            margin: 2px 8px;
        }

        .folder-dropdown-item:hover {
            background: var(--chrome-card-hover);
        }

        .folder-dropdown-favicon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .folder-dropdown-name {
            font-size: 13px;
            flex: 1;
            font-weight: 500;
        }

        .folder-dropdown-footer {
            padding: 12px 16px;
            border-top: 1px solid var(--chrome-border);
            display: flex;
            gap: 8px;
        }

        .dropdown-action-btn {
            flex: 1;
            background: var(--chrome-bookmarkbar-bg);
            border: 1px solid var(--chrome-border);
            color: var(--chrome-text);
            padding: 8px;
            border-radius: 6px;
            font-size: 12px;
            font-family: 'Google Sans', sans-serif;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .dropdown-action-btn:hover {
            background: var(--chrome-blue);
            border-color: var(--chrome-blue);
            color: white;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--chrome-card-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 12px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            transform: translateY(20px);
            transition: transform 0.2s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--chrome-border);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-title i {
            color: var(--chrome-blue);
        }

        .modal-body {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 13px;
            color: var(--chrome-text-secondary);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .form-label i {
            width: 14px;
        }

        .form-input {
            width: 100%;
            background: var(--chrome-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 8px;
            padding: 12px 16px;
            color: var(--chrome-text);
            font-size: 14px;
            font-family: 'Google Sans', sans-serif;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--chrome-blue);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }

        .form-select {
            width: 100%;
            background: var(--chrome-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 8px;
            padding: 12px 16px;
            color: var(--chrome-text);
            font-size: 14px;
            font-family: 'Google Sans', sans-serif;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23aaaaaa'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--chrome-blue);
        }

        .modal-footer {
            padding: 16px 24px 24px;
            border-top: 1px solid var(--chrome-border);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            font-family: 'Google Sans', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--chrome-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--chrome-blue-hover);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--chrome-bookmarkbar-bg);
            border: 1px solid var(--chrome-border);
            color: var(--chrome-text);
        }

        .btn-secondary:hover {
            background: var(--chrome-card-hover);
        }

        /* Theme Toggle */
        .theme-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 44px;
            height: 44px;
            background: var(--chrome-card-bg);
            border: 1px solid var(--chrome-border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--chrome-text);
            z-index: 1000;
            transition: all 0.2s ease;
            box-shadow: var(--chrome-shadow);
        }

        .theme-indicator:hover {
            background: var(--chrome-blue);
            color: white;
            transform: scale(1.05);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .speed-dial-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 15px;
            }
            
            .speed-dial-item {
                height: 110px;
            }
            
            .speed-dial-favicon {
                width: 40px;
                height: 40px;
                font-size: 18px;
                margin-bottom: 12px;
            }
            
            .chrome-bookmark-bar {
                padding: 8px 16px;
                height: 44px;
            }
            
            .bookmark-bar-item {
                padding: 6px 12px;
                font-size: 12px;
                height: 30px;
            }
            
            .chrome-container {
                margin-top: 44px;
                padding: 30px 20px;
            }
            
            .google-logo svg {
                width: 140px;
                height: 52px;
            }
            
            .search-container {
                padding: 12px 20px;
            }
        }

        @media (max-width: 480px) {
            .chrome-container {
                margin-top: 44px;
                padding: 20px 16px;
            }
            
            .google-logo svg {
                width: 120px;
                height: 45px;
            }
            
            .speed-dial-grid {
                grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
                gap: 12px;
            }
            
            .speed-dial-item {
                height: 90px;
            }
            
            .speed-dial-favicon {
                width: 36px;
                height: 36px;
                font-size: 16px;
                margin-bottom: 8px;
            }
            
            .speed-dial-name {
                font-size: 12px;
            }
            
            .bookmark-bar-item .bookmark-bar-name {
                display: none;
            }
            
            .bookmark-bar-item {
                padding: 6px;
                min-width: 36px;
                justify-content: center;
                height: 30px;
            }
            
            .bookmark-bar-favicon {
                margin: 0;
            }
            
            .bookmark-bar-add-btn {
                width: 28px;
                height: 28px;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--chrome-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--chrome-border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--chrome-blue);
        }

        /* Color classes for folder icons */
        .chrome-red-bg { background: linear-gradient(135deg, var(--chrome-red), #ff6b6b); }
        .chrome-green-bg { background: linear-gradient(135deg, var(--chrome-green), #4cd964); }
        .chrome-yellow-bg { background: linear-gradient(135deg, var(--chrome-yellow), #ffd166); }
        .chrome-purple-bg { background: linear-gradient(135deg, var(--chrome-purple), #9b59b6); }
        .chrome-blue-bg { background: linear-gradient(135deg, var(--chrome-blue), #4285f4); }
        .chrome-cyan-bg { background: linear-gradient(135deg, var(--chrome-cyan), #00cecb); }
    </style>
</head>
<body>
    <!-- Chrome Bookmark Bar - At the very top -->
    <div class="chrome-bookmark-bar" id="chromeBookmarkBar">
        <div class="bookmark-bar-container" id="bookmarkBarContainer">
            <!-- Bookmark bar items will be dynamically added here -->
        </div>
        <div class="bookmark-bar-actions">
            <button class="bookmark-bar-add-btn" id="addBookmarkBarBtn" title="Add bookmark">
                <i class="fas fa-plus"></i>
            </button>
            <button class="bookmark-bar-add-btn" id="addBookmarkBarFolderBtn" title="Add folder">
                <i class="fas fa-folder-plus"></i>
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="chrome-container" id="chromeContainer">
        <!-- Google Logo -->
        <div class="google-logo">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 272 92">
                <path fill="#ea4335" d="M115.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18C71.25 34.32 81.24 25 93.5 25s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44S80.99 39.2 80.99 47.18c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z"/>
                <path fill="#4285f4" d="M163.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18c0-12.85 9.99-22.18 22.25-22.18s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44s-12.51 5.46-12.51 13.44c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z"/>
                <path fill="#fbbc05" d="M209.75 26.34v39.82c0 16.38-9.66 23.07-21.08 23.07-10.75 0-17.22-7.19-19.66-13.07l8.48-3.53c1.51 3.61 5.21 7.87 11.17 7.87 7.31 0 11.84-4.51 11.8413v-3.19h-.34c-2.18 2.69-6.38 5.04-11.68 5.04-11.09 0-21.25-9.66-21.25-22.09 0-12.52 10.16-22.26 21.25-22.26 5.29 0 9.49 2.35 11.68 4.96h.34v-3.61h9.25zm-8.56 20.92c0-7.81-5.21-13.52-11.84-13.52-6.72 0-12.35 5.71-12.35 13.52 0 7.73 5.63 13.36 12.35 13.36 6.63 0 11.84-5.63 11.84-13.36z"/>
                <path fill="#34a853" d="M225 3v65h-9.5V3h9.5z"/>
                <path fill="#ea4335" d="M262.02 54.48l7.56 5.04c-2.44 3.61-8.32 9.83-18.48 9.83-12.6 0-22.01-9.74-22.01-22.18 0-13.19 9.49-22.18 20.92-22.18 11.51 0 17.14 9.16 18.98 14.11l1.01 2.52-29.65 12.28c2.27 4.45 5.8 6.72 10.75 6.72 4.96 0 8.4-2.44 10.92-6.14zm-23.27-7.98l19.82-8.23c-1.09-2.77-4.37-4.7-8.23-4.7-4.95 0-11.84 4.37-11.59 12.93z"/>
                <path fill="#4285f4" d="M35.29 41.41V32H67c.31 1.64.47 3.58.47 5.68 0 7.06-1.93 15.79-8.15 22.01-6.05 6.3-13.78 9.66-24.02 9.66C16.32 69.35.36 53.89.36 34.91.36 15.93 16.32.47 35.3.47c10.5 0 17.98 4.12 23.6 9.49l-6.64 6.64c-4.03-3.78-9.49-6.72-16.97-6.72-13.86 0-24.7 11.17-24.7 25.03 0 13.86 10.84 25.03 24.7 25.03 8.99 0 14.11-3.61 17.39-6.89 2.66-2.66 4.41-6.46 5.1-11.65l-22.49.01z"/>
            </svg>
        </div>

        <!-- Chrome Search Box -->
        <div class="chrome-search">
            <div class="search-container" id="searchContainer">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Search Google or type a URL">
                <div class="search-actions">
                    <button class="search-action-btn" id="voiceSearchBtn" title="Search by voice">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="search-action-btn" id="imageSearchBtn" title="Search by image">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Speed Dial Section -->
        <div class="speed-dial-section">
            <div class="section-title">Quick Access</div>
            <div class="speed-dial-grid" id="speedDialGrid">
                <!-- Speed dial items will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Theme Toggle Indicator -->
    <div class="theme-indicator" id="themeToggle" title="Toggle theme">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Add/Edit Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">
                    <i class="fas fa-bookmark"></i>
                    <span id="modalTitleText">Add Bookmark</span>
                </h3>
            </div>
            <div class="modal-body">
                <form id="bookmarkForm">
                    <div class="form-group">
                        <label for="bookmarkName" class="form-label">
                            <i class="fas fa-font"></i>
                            <span>Name</span>
                        </label>
                        <input type="text" id="bookmarkName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="bookmarkUrl" class="form-label">
                            <i class="fas fa-link"></i>
                            <span>URL</span>
                        </label>
                        <input type="url" id="bookmarkUrl" class="form-input" required>
                    </div>
                    <div class="form-group" id="folderGroup" style="display: none;">
                        <label for="bookmarkFolder" class="form-label">
                            <i class="fas fa-folder"></i>
                            <span>Folder (Optional)</span>
                        </label>
                        <select id="bookmarkFolder" class="form-select">
                            <option value="">No Folder</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelBtn">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" id="saveBtn">
                    <i class="fas fa-check"></i>
                    Save
                </button>
            </div>
        </div>
    </div>

    <!-- Folder Modal -->
    <div class="modal-overlay" id="folderModalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-folder-plus"></i>
                    <span id="folderModalTitleText">Add Folder</span>
                </h3>
            </div>
            <div class="modal-body">
                <form id="folderForm">
                    <div class="form-group">
                        <label for="folderName" class="form-label">
                            <i class="fas fa-font"></i>
                            <span>Folder Name</span>
                        </label>
                        <input type="text" id="folderName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="folderColor" class="form-label">
                            <i class="fas fa-palette"></i>
                            <span>Folder Color</span>
                        </label>
                        <select id="folderColor" class="form-select">
                            <option value="chrome-blue-bg">Blue</option>
                            <option value="chrome-red-bg">Red</option>
                            <option value="chrome-green-bg">Green</option>
                            <option value="chrome-yellow-bg">Yellow</option>
                            <option value="chrome-purple-bg">Purple</option>
                            <option value="chrome-cyan-bg">Cyan</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="folderCancelBtn">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" id="folderSaveBtn">
                    <i class="fas fa-check"></i>
                    Save
                </button>
            </div>
        </div>
    </div>

    <!-- Folder Dropdown -->
    <div class="folder-dropdown" id="folderDropdown">
        <div class="folder-dropdown-header">
            <div class="folder-dropdown-icon" id="folderDropdownIcon">
                <i class="fas fa-folder"></i>
            </div>
            <div class="folder-dropdown-title" id="folderDropdownTitle">Folder</div>
            <div class="folder-dropdown-count" id="folderDropdownCount">0 items</div>
        </div>
        <div class="folder-dropdown-items" id="folderDropdownItems">
            <!-- Folder items will be dynamically added here -->
        </div>
        <div class="folder-dropdown-footer">
            <button class="dropdown-action-btn" id="openAllFolderItems">
                <i class="fas fa-external-link-alt"></i>
                Open All
            </button>
            <button class="dropdown-action-btn" id="editFolderBtn">
                <i class="fas fa-edit"></i>
                Edit
            </button>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <button class="context-menu-item" id="contextEdit">
            <i class="fas fa-edit"></i>
            <span>Edit</span>
        </button>
        <button class="context-menu-item" id="contextDelete">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
        </button>
        <button class="context-menu-item" id="contextOpenNewTab">
            <i class="fas fa-external-link-alt"></i>
            <span>Open in new tab</span>
        </button>
    </div>

    <script>
        // Chrome Data with localStorage support
        let speedDials = [];
        let bookmarkBarItems = [];
        let nextId = {
            speedDial: 9,
            bookmark: 200,
            folder: 109,
            bookmarkBar: 109
        };

        // Load data from localStorage
        function loadFromLocalStorage() {
            // Load speed dials
            const savedSpeedDials = localStorage.getItem('chrome-speed-dials');
            if (savedSpeedDials) {
                speedDials = JSON.parse(savedSpeedDials);
                // Find the highest ID
                if (speedDials.length > 0) {
                    nextId.speedDial = Math.max(...speedDials.map(item => item.id)) + 1;
                }
            } else {
                // Default speed dials if nothing is saved
                speedDials = [
                    { id: 1, name: "Google", url: "https://google.com", icon: "fab fa-google", color: "chrome-red-bg" },
                    { id: 2, name: "Gmail", url: "https://mail.google.com", icon: "fas fa-envelope", color: "chrome-green-bg" },
                    { id: 3, name: "Drive", url: "https://drive.google.com", icon: "fas fa-cloud", color: "chrome-yellow-bg" },
                    { id: 4, name: "Calendar", url: "https://calendar.google.com", icon: "fas fa-calendar-alt", color: "chrome-blue-bg" },
                    { id: 5, name: "YouTube", url: "https://youtube.com", icon: "fab fa-youtube", color: "chrome-red-bg" },
                    { id: 6, name: "Maps", url: "https://maps.google.com", icon: "fas fa-map", color: "chrome-green-bg" },
                    { id: 7, name: "GitHub", url: "https://github.com", icon: "fab fa-github", color: "chrome-purple-bg" },
                    { id: 8, name: "Figma", url: "https://figma.com", icon: "fab fa-figma", color: "chrome-cyan-bg" },
                ];
            }

            // Load bookmark bar items
            const savedBookmarkBar = localStorage.getItem('chrome-bookmark-bar');
            if (savedBookmarkBar) {
                bookmarkBarItems = JSON.parse(savedBookmarkBar);
                // Find the highest ID
                if (bookmarkBarItems.length > 0) {
                    const allIds = bookmarkBarItems.flatMap(item => {
                        const ids = [item.id];
                        if (item.type === 'folder' && item.items) {
                            ids.push(...item.items.map(subItem => subItem.id));
                        }
                        return ids;
                    });
                    nextId.bookmarkBar = Math.max(...allIds) + 1;
                }
            } else {
                // Default bookmark bar items if nothing is saved
                bookmarkBarItems = [
                    { id: 101, name: "Google", url: "https://google.com", type: "bookmark", icon: "fab fa-google" },
                    { id: 102, name: "YouTube", url: "https://youtube.com", type: "bookmark", icon: "fab fa-youtube" },
                    { id: 103, name: "Gmail", url: "https://mail.google.com", type: "bookmark", icon: "fas fa-envelope" },
                    { id: 104, name: "Drive", url: "https://drive.google.com", type: "bookmark", icon: "fas fa-cloud" },
                    { 
                        id: 105, 
                        name: "Social", 
                        type: "folder", 
                        color: "chrome-purple-bg",
                        items: [
                            { id: 1051, name: "Twitter", url: "https://twitter.com", icon: "fab fa-twitter" },
                            { id: 1052, name: "Instagram", url: "https://instagram.com", icon: "fab fa-instagram" },
                            { id: 1053, name: "LinkedIn", url: "https://linkedin.com", icon: "fab fa-linkedin" }
                        ]
                    },
                    { 
                        id: 106, 
                        name: "Work", 
                        type: "folder", 
                        color: "chrome-blue-bg",
                        items: [
                            { id: 1061, name: "GitHub", url: "https://github.com", icon: "fab fa-github" },
                            { id: 1062, name: "Stack Overflow", url: "https://stackoverflow.com", icon: "fab fa-stack-overflow" },
                            { id: 1063, name: "Notion", url: "https://notion.so", icon: "fas fa-sticky-note" }
                        ]
                    },
                    { id: 107, name: "News", url: "https://news.google.com", type: "bookmark", icon: "fas fa-newspaper" },
                    { id: 108, name: "Spotify", url: "https://spotify.com", type: "bookmark", icon: "fab fa-spotify" },
                ];
            }
        }

        // Save data to localStorage
        function saveToLocalStorage() {
            localStorage.setItem('chrome-speed-dials', JSON.stringify(speedDials));
            localStorage.setItem('chrome-bookmark-bar', JSON.stringify(bookmarkBarItems));
        }

        let editingItem = null;
        let editingFolder = null;
        let activeFolderDropdown = null;
        let contextMenuTarget = null;
        let contextMenuType = null;
        let contextMenuPosition = { x: 0, y: 0 };

        // DOM Elements
        const bookmarkBarContainer = document.getElementById('bookmarkBarContainer');
        const speedDialGrid = document.getElementById('speedDialGrid');
        const modalOverlay = document.getElementById('modalOverlay');
        const folderModalOverlay = document.getElementById('folderModalOverlay');
        const modalTitleText = document.getElementById('modalTitleText');
        const bookmarkNameInput = document.getElementById('bookmarkName');
        const bookmarkUrlInput = document.getElementById('bookmarkUrl');
        const folderNameInput = document.getElementById('folderName');
        const folderColorSelect = document.getElementById('folderColor');
        const saveBtn = document.getElementById('saveBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const folderSaveBtn = document.getElementById('folderSaveBtn');
        const folderCancelBtn = document.getElementById('folderCancelBtn');
        const searchContainer = document.getElementById('searchContainer');
        const searchInput = document.getElementById('searchInput');
        const addBookmarkBarBtn = document.getElementById('addBookmarkBarBtn');
        const addBookmarkBarFolderBtn = document.getElementById('addBookmarkBarFolderBtn');
        const themeToggle = document.getElementById('themeToggle');
        const folderDropdown = document.getElementById('folderDropdown');
        const folderDropdownIcon = document.getElementById('folderDropdownIcon');
        const folderDropdownTitle = document.getElementById('folderDropdownTitle');
        const folderDropdownCount = document.getElementById('folderDropdownCount');
        const folderDropdownItems = document.getElementById('folderDropdownItems');
        const openAllFolderItems = document.getElementById('openAllFolderItems');
        const editFolderBtn = document.getElementById('editFolderBtn');
        const contextMenu = document.getElementById('contextMenu');
        const contextEdit = document.getElementById('contextEdit');
        const contextDelete = document.getElementById('contextDelete');
        const contextOpenNewTab = document.getElementById('contextOpenNewTab');

        // Initialize the Chrome homepage
        function initChromeHomepage() {
            loadFromLocalStorage();
            renderBookmarkBar();
            renderSpeedDials();
            setupEventListeners();
            
            // Load saved theme
            const savedTheme = localStorage.getItem('chrome-theme');
            if (savedTheme === 'light') {
                setLightTheme();
            }
        }

        // Open link in new tab
        function openInNewTab(url) {
            window.open(url, '_blank');
        }

        // Render Bookmark Bar
        function renderBookmarkBar() {
            bookmarkBarContainer.innerHTML = '';
            
            bookmarkBarItems.forEach(item => {
                if (item.type === 'bookmark') {
                    const bookmarkItem = document.createElement('button');
                    bookmarkItem.className = 'bookmark-bar-item';
                    bookmarkItem.setAttribute('data-id', item.id);
                    bookmarkItem.setAttribute('data-type', 'bookmark');
                    bookmarkItem.innerHTML = `
                        <div class="bookmark-bar-favicon">
                            <i class="${item.icon}"></i>
                        </div>
                        <div class="bookmark-bar-name">${item.name}</div>
                    `;
                    
                    // Open website on click in new tab
                    bookmarkItem.addEventListener('click', (e) => {
                        if (e.button === 0) { // Left click only
                            openInNewTab(item.url);
                        }
                    });
                    
                    // Context menu on right click
                    bookmarkItem.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        showContextMenu(e, item, 'bookmark');
                    });
                    
                    bookmarkBarContainer.appendChild(bookmarkItem);
                } else if (item.type === 'folder') {
                    const folderItem = document.createElement('button');
                    folderItem.className = 'bookmark-bar-item folder';
                    folderItem.setAttribute('data-id', item.id);
                    folderItem.setAttribute('data-type', 'folder');
                    folderItem.innerHTML = `
                        <div class="bookmark-bar-favicon ${item.color}">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="bookmark-bar-name">${item.name}</div>
                    `;
                    
                    // Show folder dropdown on click
                    folderItem.addEventListener('click', (e) => {
                        if (e.button === 0) { // Left click only
                            e.stopPropagation();
                            toggleFolderDropdown(e, item);
                        }
                    });
                    
                    // Context menu on right click
                    folderItem.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        showContextMenu(e, item, 'folder');
                    });
                    
                    bookmarkBarContainer.appendChild(folderItem);
                }
            });
        }

        // Toggle folder dropdown
        function toggleFolderDropdown(event, folder) {
            // Close any open dropdown
            if (activeFolderDropdown) {
                activeFolderDropdown.classList.remove('active');
            }
            
            // If clicking the same folder, close it
            if (activeFolderDropdown === folderDropdown && 
                folderDropdown.getAttribute('data-folder-id') == folder.id) {
                activeFolderDropdown = null;
                return;
            }
            
            // Position dropdown
            const rect = event.currentTarget.getBoundingClientRect();
            folderDropdown.style.left = Math.min(rect.left, window.innerWidth - 220) + 'px';
            folderDropdown.style.top = rect.bottom + 4 + 'px';
            
            // Update dropdown content
            folderDropdownIcon.className = `folder-dropdown-icon ${folder.color}`;
            folderDropdownIcon.innerHTML = `<i class="fas fa-folder"></i>`;
            folderDropdownTitle.textContent = folder.name;
            folderDropdownCount.textContent = `${folder.items ? folder.items.length : 0} items`;
            
            // Populate dropdown items
            folderDropdownItems.innerHTML = '';
            if (folder.items && folder.items.length > 0) {
                folder.items.forEach(item => {
                    const dropdownItem = document.createElement('div');
                    dropdownItem.className = 'folder-dropdown-item';
                    dropdownItem.innerHTML = `
                        <div class="folder-dropdown-favicon">
                            <i class="${item.icon}"></i>
                        </div>
                        <div class="folder-dropdown-name">${item.name}</div>
                    `;
                    
                    dropdownItem.addEventListener('click', (e) => {
                        e.stopPropagation();
                        openInNewTab(item.url);
                        folderDropdown.classList.remove('active');
                        activeFolderDropdown = null;
                    });
                    
                    folderDropdownItems.appendChild(dropdownItem);
                });
            } else {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'folder-dropdown-item';
                emptyMessage.innerHTML = `
                    <div style="text-align: center; width: 100%; color: var(--chrome-text-secondary); font-size: 12px;">
                        No bookmarks in this folder
                    </div>
                `;
                folderDropdownItems.appendChild(emptyMessage);
            }
            
            // Set up open all button
            openAllFolderItems.onclick = () => {
                if (folder.items && folder.items.length > 0) {
                    folder.items.forEach(item => {
                        openInNewTab(item.url);
                    });
                }
                folderDropdown.classList.remove('active');
                activeFolderDropdown = null;
            };
            
            // Set up edit button
            editFolderBtn.onclick = () => {
                folderDropdown.classList.remove('active');
                activeFolderDropdown = null;
                openFolderModal('edit', folder);
            };
            
            // Set folder ID and show dropdown
            folderDropdown.setAttribute('data-folder-id', folder.id);
            folderDropdown.classList.add('active');
            activeFolderDropdown = folderDropdown;
            
            // Close dropdown when clicking outside
            setTimeout(() => {
                document.addEventListener('click', closeFolderDropdownOnClickOutside);
            }, 10);
        }

        // Close folder dropdown when clicking outside
        function closeFolderDropdownOnClickOutside(event) {
            if (!folderDropdown.contains(event.target) && 
                !event.target.closest('.bookmark-bar-item.folder')) {
                folderDropdown.classList.remove('active');
                activeFolderDropdown = null;
                document.removeEventListener('click', closeFolderDropdownOnClickOutside);
            }
        }

        // Show context menu
        function showContextMenu(event, item, type) {
            event.preventDefault();
            
            // Store position for context menu
            contextMenuPosition = { x: event.clientX, y: event.clientY };
            
            // Position context menu
            contextMenu.style.left = contextMenuPosition.x + 'px';
            contextMenu.style.top = contextMenuPosition.y + 'px';
            contextMenu.classList.add('active');
            
            // Store target for context menu actions
            contextMenuTarget = item;
            contextMenuType = type;
            
            // Update context menu options based on item type
            if (type === 'folder') {
                contextEdit.querySelector('span').textContent = 'Edit folder';
                contextDelete.querySelector('span').textContent = 'Delete folder';
            } else {
                contextEdit.querySelector('span').textContent = 'Edit bookmark';
                contextDelete.querySelector('span').textContent = 'Delete bookmark';
            }
            
            // Close context menu when clicking outside
            setTimeout(() => {
                document.addEventListener('click', closeContextMenuOnClickOutside);
            }, 10);
        }

        // Close context menu when clicking outside
        function closeContextMenuOnClickOutside(event) {
            if (!contextMenu.contains(event.target)) {
                contextMenu.classList.remove('active');
                document.removeEventListener('click', closeContextMenuOnClickOutside);
            }
        }

        // Render Speed Dials - WITHOUT EDIT/DELETE BUTTONS ON HOVER
        function renderSpeedDials() {
            speedDialGrid.innerHTML = '';
            
            // Add speed dial items - No edit/delete buttons visible on hover
            speedDials.forEach(item => {
                const speedDialItem = document.createElement('div');
                speedDialItem.className = 'speed-dial-item';
                speedDialItem.setAttribute('data-id', item.id);
                speedDialItem.setAttribute('data-type', 'speedDial');
                speedDialItem.innerHTML = `
                    <div class="speed-dial-favicon ${item.color}">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="speed-dial-name">${item.name}</div>
                `;
                
                // Open website on click in new tab
                speedDialItem.addEventListener('click', (e) => {
                    if (e.button === 0) { // Left click only
                        openInNewTab(item.url);
                    }
                });
                
                // Context menu on right click
                speedDialItem.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    showContextMenu(e, item, 'speedDial');
                });
                
                speedDialGrid.appendChild(speedDialItem);
            });
            
            // Add "Add" button
            const addButton = document.createElement('div');
            addButton.className = 'speed-dial-item add-speed-dial';
            addButton.innerHTML = `
                <div class="speed-dial-favicon">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="speed-dial-name">Add Shortcut</div>
            `;
            addButton.addEventListener('click', () => openModal('add', 'speedDial'));
            speedDialGrid.appendChild(addButton);
        }

        // Open modal for adding/editing
        function openModal(mode, type, item = null) {
            modalTitleText.textContent = mode === 'add' ? `Add ${type === 'speedDial' ? 'Shortcut' : 'Bookmark'}` : 'Edit';
            bookmarkNameInput.value = item ? item.name : '';
            bookmarkUrlInput.value = item ? item.url : 'https://';
            
            // Hide folder group for speed dials
            if (type === 'speedDial') {
                document.getElementById('folderGroup').style.display = 'none';
            } else {
                document.getElementById('folderGroup').style.display = 'block';
            }
            
            editingItem = { ...item, type };
            modalOverlay.classList.add('active');
            
            // Focus on name input
            setTimeout(() => {
                bookmarkNameInput.focus();
            }, 100);
        }

        // Open folder modal
        function openFolderModal(mode, folder = null) {
            const folderModalTitleText = document.querySelector('#folderModalTitleText');
            folderModalTitleText.textContent = mode === 'add' ? 'Add Folder' : 'Edit Folder';
            folderNameInput.value = folder ? folder.name : '';
            folderColorSelect.value = folder ? folder.color : 'chrome-blue-bg';
            
            editingFolder = folder;
            folderModalOverlay.classList.add('active');
            
            setTimeout(() => {
                folderNameInput.focus();
            }, 100);
        }

        // Save bookmark/speed dial
        function saveItem() {
            const name = bookmarkNameInput.value.trim();
            const url = bookmarkUrlInput.value.trim();
            
            if (!name) {
                alert('Please enter a name');
                return;
            }
            
            if (editingItem.type !== 'folder' && !url) {
                alert('Please enter a URL');
                return;
            }
            
            // Validate URL if it's not a folder
            if (editingItem.type !== 'folder' && url) {
                try {
                    new URL(url);
                } catch {
                    alert('Please enter a valid URL');
                    return;
                }
            }
            
            if (editingItem.type === 'speedDial') {
                if (editingItem.id) {
                    // Update existing speed dial
                    const index = speedDials.findIndex(item => item.id === editingItem.id);
                    if (index !== -1) {
                        speedDials[index].name = name;
                        speedDials[index].url = url;
                        speedDials[index].icon = getFaviconForUrl(url);
                    }
                } else {
                    // Add new speed dial
                    const icon = getFaviconForUrl(url);
                    const colors = ['chrome-red-bg', 'chrome-green-bg', 'chrome-yellow-bg', 'chrome-blue-bg', 'chrome-purple-bg', 'chrome-cyan-bg'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    speedDials.push({
                        id: nextId.speedDial++,
                        name,
                        url,
                        icon,
                        color
                    });
                }
                renderSpeedDials();
                saveToLocalStorage(); // Save to localStorage
            } else {
                // Bookmark for bookmark bar
                if (editingItem.id) {
                    // Update existing bookmark bar item
                    const index = bookmarkBarItems.findIndex(item => item.id === editingItem.id);
                    if (index !== -1) {
                        bookmarkBarItems[index].name = name;
                        if (bookmarkBarItems[index].type === 'bookmark') {
                            bookmarkBarItems[index].url = url;
                            bookmarkBarItems[index].icon = getFaviconForUrl(url);
                        }
                    }
                } else {
                    // Add new bookmark to bookmark bar
                    bookmarkBarItems.push({
                        id: nextId.bookmarkBar++,
                        name,
                        url,
                        type: 'bookmark',
                        icon: getFaviconForUrl(url)
                    });
                }
                renderBookmarkBar();
                saveToLocalStorage(); // Save to localStorage
            }
            
            closeModal();
        }

        // Save folder
        function saveFolder() {
            const name = folderNameInput.value.trim();
            const color = folderColorSelect.value;
            
            if (!name) {
                alert('Please enter a folder name');
                return;
            }
            
            if (editingFolder) {
                // Update existing folder
                const index = bookmarkBarItems.findIndex(item => item.id === editingFolder.id);
                if (index !== -1) {
                    bookmarkBarItems[index].name = name;
                    bookmarkBarItems[index].color = color;
                }
            } else {
                // Add new folder to bookmark bar
                bookmarkBarItems.push({
                    id: nextId.bookmarkBar++,
                    name,
                    type: 'folder',
                    color,
                    items: []
                });
            }
            
            renderBookmarkBar();
            saveToLocalStorage(); // Save to localStorage
            closeFolderModal();
        }

        // Get favicon for URL
        function getFaviconForUrl(url) {
            try {
                const domain = new URL(url).hostname;
                const iconMap = {
                    'google.com': 'fab fa-google',
                    'github.com': 'fab fa-github',
                    'youtube.com': 'fab fa-youtube',
                    'mail.google.com': 'fas fa-envelope',
                    'drive.google.com': 'fas fa-cloud',
                    'calendar.google.com': 'fas fa-calendar-alt',
                    'maps.google.com': 'fas fa-map',
                    'translate.google.com': 'fas fa-language',
                    'stackoverflow.com': 'fab fa-stack-overflow',
                    'developer.mozilla.org': 'fab fa-mdn',
                    'css-tricks.com': 'fas fa-paint-brush',
                    'caniuse.com': 'fas fa-check-circle',
                    'netflix.com': 'fas fa-film',
                    'spotify.com': 'fab fa-spotify',
                    'twitter.com': 'fab fa-twitter',
                    'facebook.com': 'fab fa-facebook',
                    'instagram.com': 'fab fa-instagram',
                    'linkedin.com': 'fab fa-linkedin',
                    'reddit.com': 'fab fa-reddit',
                    'amazon.com': 'fab fa-amazon',
                    'wikipedia.org': 'fab fa-wikipedia-w',
                    'trello.com': 'fab fa-trello',
                    'slack.com': 'fab fa-slack',
                    'figma.com': 'fab fa-figma',
                    'notion.so': 'fas fa-sticky-note',
                    'news.google.com': 'fas fa-newspaper',
                    'gmail.com': 'fas fa-envelope',
                    'outlook.com': 'fas fa-envelope',
                    'dropbox.com': 'fab fa-dropbox',
                    'airtable.com': 'fas fa-table',
                    'zoom.us': 'fas fa-video',
                    'teams.microsoft.com': 'fab fa-microsoft'
                };
                
                for (const [key, icon] of Object.entries(iconMap)) {
                    if (domain.includes(key)) {
                        return icon;
                    }
                }
            } catch (e) {
                // Invalid URL
            }
            
            return 'fas fa-globe';
        }

        // Close modal
        function closeModal() {
            modalOverlay.classList.remove('active');
            editingItem = null;
            document.getElementById('bookmarkForm').reset();
        }

        // Close folder modal
        function closeFolderModal() {
            folderModalOverlay.classList.remove('active');
            editingFolder = null;
            document.getElementById('folderForm').reset();
        }

        // Toggle theme
        function toggleTheme() {
            const isDark = getComputedStyle(document.documentElement).getPropertyValue('--chrome-bg') === '#0f0f0f';
            
            if (isDark) {
                setLightTheme();
                localStorage.setItem('chrome-theme', 'light');
            } else {
                setDarkTheme();
                localStorage.setItem('chrome-theme', 'dark');
            }
        }

        function setDarkTheme() {
            document.documentElement.style.setProperty('--chrome-bg', '#0f0f0f');
            document.documentElement.style.setProperty('--chrome-card-bg', '#1e1e1e');
            document.documentElement.style.setProperty('--chrome-card-hover', '#2a2a2a');
            document.documentElement.style.setProperty('--chrome-text', '#ffffff');
            document.documentElement.style.setProperty('--chrome-text-secondary', '#aaaaaa');
            document.documentElement.style.setProperty('--chrome-border', '#333333');
            document.documentElement.style.setProperty('--chrome-search-bg', '#2a2a2a');
            document.documentElement.style.setProperty('--chrome-search-hover', '#333333');
            document.documentElement.style.setProperty('--chrome-bookmarkbar-bg', '#151515');
            themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }

        function setLightTheme() {
            document.documentElement.style.setProperty('--chrome-bg', '#f8f9fa');
            document.documentElement.style.setProperty('--chrome-card-bg', '#ffffff');
            document.documentElement.style.setProperty('--chrome-card-hover', '#f1f3f4');
            document.documentElement.style.setProperty('--chrome-text', '#202124');
            document.documentElement.style.setProperty('--chrome-text-secondary', '#5f6368');
            document.documentElement.style.setProperty('--chrome-border', '#dadce0');
            document.documentElement.style.setProperty('--chrome-blue', '#1a73e8');
            document.documentElement.style.setProperty('--chrome-blue-hover', '#2b7de9');
            document.documentElement.style.setProperty('--chrome-search-bg', '#f1f3f4');
            document.documentElement.style.setProperty('--chrome-search-hover', '#e8eaed');
            document.documentElement.style.setProperty('--chrome-bookmarkbar-bg', '#ffffff');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }

        // Setup event listeners
        function setupEventListeners() {
            // Modal events
            saveBtn.addEventListener('click', saveItem);
            cancelBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) closeModal();
            });
            
            // Folder modal events
            folderSaveBtn.addEventListener('click', saveFolder);
            folderCancelBtn.addEventListener('click', closeFolderModal);
            folderModalOverlay.addEventListener('click', (e) => {
                if (e.target === folderModalOverlay) closeFolderModal();
            });
            
            // Search box events
            searchInput.addEventListener('focus', () => {
                searchContainer.classList.add('focused');
            });
            
            searchInput.addEventListener('blur', () => {
                searchContainer.classList.remove('focused');
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim();
                    if (query) {
                        if (query.includes('.') && !query.includes(' ')) {
                            // Probably a URL
                            const url = query.startsWith('http') ? query : `https://${query}`;
                            openInNewTab(url);
                        } else {
                            // Search query
                            openInNewTab(`https://www.google.com/search?q=${encodeURIComponent(query)}`);
                        }
                    }
                }
            });
            
            // Add bookmark buttons
            addBookmarkBarBtn.addEventListener('click', () => openModal('add', 'bookmark'));
            addBookmarkBarFolderBtn.addEventListener('click', () => openFolderModal('add'));
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Voice search button
            document.getElementById('voiceSearchBtn').addEventListener('click', () => {
                alert('Voice search would activate here in a real Chrome');
            });
            
            // Image search button
            document.getElementById('imageSearchBtn').addEventListener('click', () => {
                alert('Image search would activate here in a real Chrome');
            });
            
            // Context menu actions
            contextEdit.addEventListener('click', () => {
                if (contextMenuTarget && contextMenuType) {
                    if (contextMenuType === 'folder') {
                        openFolderModal('edit', contextMenuTarget);
                    } else {
                        openModal('edit', contextMenuType === 'speedDial' ? 'speedDial' : 'bookmark', contextMenuTarget);
                    }
                    contextMenu.classList.remove('active');
                    contextMenuTarget = null;
                    contextMenuType = null;
                }
            });
            
            contextDelete.addEventListener('click', () => {
                if (contextMenuTarget && contextMenuType) {
                    let confirmMessage = '';
                    if (contextMenuType === 'folder') {
                        confirmMessage = `Delete folder "${contextMenuTarget.name}" and all its contents?`;
                    } else if (contextMenuType === 'speedDial') {
                        confirmMessage = `Delete shortcut "${contextMenuTarget.name}"?`;
                    } else {
                        confirmMessage = `Delete bookmark "${contextMenuTarget.name}"?`;
                    }
                    
                    if (confirm(confirmMessage)) {
                        if (contextMenuType === 'folder') {
                            bookmarkBarItems = bookmarkBarItems.filter(item => item.id !== contextMenuTarget.id);
                            renderBookmarkBar();
                            saveToLocalStorage(); // Save to localStorage
                        } else if (contextMenuType === 'speedDial') {
                            speedDials = speedDials.filter(item => item.id !== contextMenuTarget.id);
                            renderSpeedDials();
                            saveToLocalStorage(); // Save to localStorage
                        } else {
                            bookmarkBarItems = bookmarkBarItems.filter(item => item.id !== contextMenuTarget.id);
                            renderBookmarkBar();
                            saveToLocalStorage(); // Save to localStorage
                        }
                        contextMenu.classList.remove('active');
                        contextMenuTarget = null;
                        contextMenuType = null;
                    }
                }
            });
            
            contextOpenNewTab.addEventListener('click', () => {
                if (contextMenuTarget && contextMenuTarget.url) {
                    openInNewTab(contextMenuTarget.url);
                    contextMenu.classList.remove('active');
                    contextMenuTarget = null;
                    contextMenuType = null;
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + D to add speed dial
                if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                    e.preventDefault();
                    openModal('add', 'speedDial');
                }
                
                // Ctrl/Cmd + L to focus search bar
                if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                    e.preventDefault();
                    searchInput.focus();
                }
                
                // Escape to close modals and dropdowns
                if (e.key === 'Escape') {
                    if (modalOverlay.classList.contains('active')) closeModal();
                    if (folderModalOverlay.classList.contains('active')) closeFolderModal();
                    if (folderDropdown.classList.contains('active')) {
                        folderDropdown.classList.remove('active');
                        activeFolderDropdown = null;
                    }
                    if (contextMenu.classList.contains('active')) {
                        contextMenu.classList.remove('active');
                        contextMenuTarget = null;
                        contextMenuType = null;
                    }
                }
            });
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                // Close folder dropdown
                if (activeFolderDropdown && !folderDropdown.contains(e.target) && 
                    !e.target.closest('.bookmark-bar-item.folder')) {
                    folderDropdown.classList.remove('active');
                    activeFolderDropdown = null;
                }
                
                // Close context menu
                if (contextMenu.classList.contains('active') && !contextMenu.contains(e.target)) {
                    contextMenu.classList.remove('active');
                    contextMenuTarget = null;
                    contextMenuType = null;
                }
            });
        }

        // Initialize the Chrome homepage
        document.addEventListener('DOMContentLoaded', initChromeHomepage);
    </script>
</body>
</html>
